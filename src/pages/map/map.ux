<template>
  <div class="map-container">
    <!-- è°ƒè¯•ä¿¡æ¯ï¼šåœ°å›¾å®¹å™¨ -->
    <text class="debug-info" show="{{ showDebugInfo }}">å½“å‰æ˜¯åœ°å›¾å®¹å™¨(map-container)</text>
    
    <!-- åœ°å›¾æ¸²æŸ“çŠ¶æ€æŒ‡ç¤ºå™¨ -->
    <div class="map-status-indicator">
      <!-- è°ƒè¯•ä¿¡æ¯ï¼šçŠ¶æ€æŒ‡ç¤ºå™¨ -->
      <text class="debug-info" show="{{ showDebugInfo }}">å½“å‰æ˜¯åœ°å›¾çŠ¶æ€æŒ‡ç¤ºå™¨(map-status-indicator)</text>
      <text class="map-status-text">åœ°å›¾çŠ¶æ€: {{ (terrainGrid && Array.isArray(terrainGrid) && terrainGrid.length > 0) ? 'å·²åŠ è½½' : 'æœªåŠ è½½' }}</text>
      <text class="map-info-text" show="{{ terrainGrid && Array.isArray(terrainGrid) && terrainGrid.length > 0 && terrainGrid[0] }}">{{ terrainGrid.length }}x{{ terrainGrid[0].length }} ç½‘æ ¼</text>
      <text class="player-status-text">ç©å®¶: ({{ playerPosition.x }},{{ playerPosition.y }})</text>
      
      <!-- è¯¦ç»†è°ƒè¯•ä¿¡æ¯ -->
      <text class="debug-info" show="{{ showDebugInfo }}">terrainGridç±»å‹: {{ typeof terrainGrid }}</text>
      <text class="debug-info" show="{{ showDebugInfo }}">æ˜¯å¦æ•°ç»„: {{ Array.isArray(terrainGrid) ? 'æ˜¯' : 'å¦' }}</text>
      <text class="debug-info" show="{{ showDebugInfo }}">æ•°ç»„é•¿åº¦: {{ terrainGrid ? terrainGrid.length : 'æ— ' }}</text>
    </div>
    
    <!-- 10x10åœ°å½¢ç½‘æ ¼æ˜¾ç¤º -->
    <div class="terrain-grid" show="{{ terrainGrid && Array.isArray(terrainGrid) && terrainGrid.length > 0 }}">
      <!-- è°ƒè¯•ä¿¡æ¯ï¼šåœ°å½¢ç½‘æ ¼ -->
      <text class="debug-info" show="{{ showDebugInfo }}">å½“å‰æ˜¯åœ°å½¢ç½‘æ ¼(terrain-grid)</text>
      <text class="debug-info" show="{{ showDebugInfo }}">ç½‘æ ¼æ˜¾ç¤ºæ¡ä»¶: {{ (terrainGrid && Array.isArray(terrainGrid) && terrainGrid.length > 0) ? 'æ»¡è¶³' : 'ä¸æ»¡è¶³' }}</text>
      <text class="debug-info" show="{{ showDebugInfo }}">ç½‘æ ¼æ•°æ®: {{ terrainGrid ? 'å­˜åœ¨' : 'ä¸å­˜åœ¨' }}</text>
      <div class="terrain-row" for="{{(row, rowIndex) in terrainGrid}}" show="{{ row && Array.isArray(row) }}">
          <!-- è°ƒè¯•ä¿¡æ¯ï¼šåœ°å½¢è¡Œ -->
          <text class="debug-info" show="{{ showDebugInfo }}">å½“å‰æ˜¯åœ°å½¢è¡Œ{{ rowIndex }}(terrain-row)</text>
          <text class="debug-info" show="{{ showDebugInfo }}">è¡Œ{{ rowIndex }}æ•°æ®: {{ row ? 'å­˜åœ¨' : 'ä¸å­˜åœ¨' }}, ç±»å‹: {{ typeof row }}, é•¿åº¦: {{ row ? row.length : 0 }}</text>
          <div class="terrain-tile-container" for="{{(tile, colIndex) in row}}" show="{{ tile }}">
            <!-- è°ƒè¯•ä¿¡æ¯ï¼šåœ°å½¢ç“¦ç‰‡å®¹å™¨ -->
            <text class="debug-info" show="{{ showDebugInfo }}">å½“å‰æ˜¯åœ°å½¢ç“¦ç‰‡å®¹å™¨{{ rowIndex }}-{{ colIndex }}(terrain-tile-container)</text>
            <text class="debug-info" show="{{ showDebugInfo }}">ç“¦ç‰‡[{{ rowIndex }}][{{ colIndex }}]: {{ tile ? tile.biome : 'æ— æ•°æ®' }}</text>
          
          <!-- åœ°å½¢èƒŒæ™¯ -->
            <text class="debug-info" show="{{ showDebugInfo }}">èƒŒæ™¯å›¾ç‰‡: {{ getBiomePath(tile.biome) }}</text>
            <image class="terrain-tile-bg" src="{{ getBiomePath(tile.biome) }}" onerror="handleImageError"></image>
            <!-- åœ°å½¢ç‰¹å¾ -->
            <text class="debug-info" show="{{ showDebugInfo && tile.hill }}">åœ°å½¢å›¾ç‰‡: {{ getHillPath(tile.hill) }}</text>
            <image class="terrain-tile-hill" show="{{ tile.hill && tile.hill !== '' }}" src="{{ getHillPath(tile.hill) }}" onerror="handleImageError"></image>
            <!-- åœ°å½¢ç‰©ä½“ -->
            <text class="debug-info" show="{{ showDebugInfo && tile.object }}">ç‰©ä½“å›¾ç‰‡: {{ getObjectPath(tile.object) }}</text>
            <image class="terrain-tile-object" show="{{ tile.object && tile.object !== '' }}" src="{{ getObjectPath(tile.object) }}" onerror="handleImageError"></image>
          
          <!-- è°ƒè¯•æ–‡å­—æ ‡è¯†å’Œæ¸²æŸ“éªŒè¯ -->
          <text class="terrain-debug-text">{{ rowIndex }},{{ colIndex }}</text>
          <text class="terrain-biome-text">{{ tile.biome || 'N/A' }}</text>
          <text class="terrain-hill-text" show="{{ tile.hill }}">{{ tile.hill }}</text>
          
          <!-- ç©å®¶è§’è‰²æ˜¾ç¤ºï¼ˆä»…åœ¨ç©å®¶ä½ç½®æ˜¾ç¤ºï¼‰ -->
          <div class="player-character" show="{{ playerPosition.x === colIndex && playerPosition.y === rowIndex }}">
            <!-- è°ƒè¯•ä¿¡æ¯ï¼šç©å®¶è§’è‰² -->
            <text class="debug-info" show="{{ showDebugInfo }}">å½“å‰æ˜¯ç©å®¶è§’è‰²(player-character)</text>
            <image class="player-body" src="{{ characterPaths.body }}" onerror="handleImageError"></image>
            <image class="player-head" show="{{ characterPaths.head && characterPaths.head !== '' }}" src="{{ characterPaths.head }}" onerror="handleImageError"></image>
            <image class="player-hair" show="{{ characterPaths.hair && characterPaths.hair !== '' }}" src="{{ characterPaths.hair }}" onerror="handleImageError"></image>
            <image class="player-beard" show="{{ characterPaths.beard && characterPaths.beard !== '' }}" src="{{ characterPaths.beard }}" onerror="handleImageError"></image>
          </div>
        </div>
      </div>
    </div>
    
    <!-- å½“å‰ä½ç½®è¯¦ç»†ä¿¡æ¯æ˜¾ç¤º -->
    <div class="terrain-info-panel">
      <!-- è°ƒè¯•ä¿¡æ¯ï¼šåœ°å½¢ä¿¡æ¯é¢æ¿ -->
      <text class="debug-info" show="{{ showDebugInfo }}">å½“å‰æ˜¯åœ°å½¢ä¿¡æ¯é¢æ¿(terrain-info-panel)</text>
      <text class="terrain-info-text">{{ getCurrentTileInfo() }}</text>
      <text class="player-name-text">{{ (colonistData || currentCharacter).name || 'è§’è‰²' }}</text>
    </div>
  </div>
</template>

<script>
export default {
  data() {
    return {
      terrainGrid: [],
      playerPosition: { x: 2, y: 2 },
      characterPaths: {
        body: 'common/human/bodies/Naked_Male_south.png',
        head: 'common/human/heads/Male/Male_Average_Normal_south.png',
        hair: 'common/human/hairs/Decent_south.png',
        beard: 'common/human/beards/BeardMoustache_south.png'
      },
      colonistData: null,
      currentCharacter: null,
      currentTileInfo: {
        biome: 'TemperateForest',
        hill: null,
        object: null
      },
      showDebugInfo: true
    }
  },
  
  onInit() {
    // å°è¯•ä»çˆ¶ç»„ä»¶è·å–æ•°æ®
    this.syncWithParentData()
    
    // å¦‚æœæ²¡æœ‰æ•°æ®ï¼Œåˆ™åˆå§‹åŒ–é»˜è®¤åœ°å½¢æ•°æ®
    if (!this.terrainGrid || this.terrainGrid.length === 0) {
      this.initializeTerrainGrid()
    }
    
    // è°ƒè¯•è¾“å‡ºï¼šéªŒè¯terrainGridæ•°æ®ä¼ é€’
    console.log('ğŸ” Mapç»„ä»¶åˆå§‹åŒ– - terrainGridè°ƒè¯•ä¿¡æ¯:', {
      terrainGridå­˜åœ¨: !!this.terrainGrid,
      terrainGridç±»å‹: typeof this.terrainGrid,
      æ˜¯å¦æ•°ç»„: Array.isArray(this.terrainGrid),
      æ•°ç»„é•¿åº¦: this.terrainGrid ? this.terrainGrid.length : 0,
      ç¬¬ä¸€è¡Œé•¿åº¦: this.terrainGrid && this.terrainGrid[0] ? this.terrainGrid[0].length : 0,
      showDebugInfo: this.showDebugInfo
    })
    
    // éªŒè¯æ¡ä»¶æ¸²æŸ“é€»è¾‘
    const terrainGridValid = this.terrainGrid && Array.isArray(this.terrainGrid) && this.terrainGrid.length > 0
    console.log('ğŸ” åœ°å½¢ç½‘æ ¼æ˜¾ç¤ºæ¡ä»¶éªŒè¯:', {
      æ¡ä»¶1_terrainGridå­˜åœ¨: !!this.terrainGrid,
      æ¡ä»¶2_æ˜¯æ•°ç»„: Array.isArray(this.terrainGrid),
      æ¡ä»¶3_é•¿åº¦å¤§äº0: this.terrainGrid ? this.terrainGrid.length > 0 : false,
      æœ€ç»ˆæ˜¾ç¤ºæ¡ä»¶: terrainGridValid
    })
    
    // éªŒè¯æ¯è¡Œæ•°æ®
    if (this.terrainGrid && Array.isArray(this.terrainGrid)) {
      for (let i = 0; i < this.terrainGrid.length; i++) {
        const row = this.terrainGrid[i]
        console.log(`ğŸ” ç¬¬${i}è¡Œæ•°æ®éªŒè¯:`, {
          è¡Œå­˜åœ¨: !!row,
          è¡Œç±»å‹: typeof row,
          æ˜¯å¦æ•°ç»„: Array.isArray(row),
          è¡Œé•¿åº¦: row ? row.length : 0,
          æ˜¾ç¤ºæ¡ä»¶: row && Array.isArray(row)
        })
        
        // éªŒè¯æ¯ä¸ªç“¦ç‰‡æ•°æ®
        if (row && Array.isArray(row)) {
          for (let j = 0; j < Math.min(row.length, 3); j++) { // åªæ£€æŸ¥å‰3ä¸ªç“¦ç‰‡é¿å…æ—¥å¿—è¿‡å¤š
            const tile = row[j]
            console.log(`ğŸ” ç“¦ç‰‡[${i}][${j}]æ•°æ®éªŒè¯:`, {
              ç“¦ç‰‡å­˜åœ¨: !!tile,
              ç“¦ç‰‡ç±»å‹: typeof tile,
              ç”Ÿç‰©ç¾¤ç³»: tile ? tile.biome : null,
              åœ°å½¢ç‰¹å¾: tile ? tile.hill : null,
              åœ°å½¢ç‰©ä½“: tile ? tile.object : null,
              æ˜¾ç¤ºæ¡ä»¶: !!tile
            })
          }
        }
      }
    }
  },
  
  methods: {
    // ä»çˆ¶ç»„ä»¶åŒæ­¥æ•°æ®
    syncWithParentData() {
      try {
        // å°è¯•ä»çˆ¶ç»„ä»¶è·å–æ•°æ®
        if (this.$parent) {
          console.log('ğŸ” å°è¯•ä»çˆ¶ç»„ä»¶è·å–æ•°æ®...')
          
          if (this.$parent.terrainGrid && Array.isArray(this.$parent.terrainGrid) && this.$parent.terrainGrid.length > 0) {
            this.terrainGrid = this.$parent.terrainGrid
            console.log('âœ… ä»çˆ¶ç»„ä»¶è·å–terrainGridæˆåŠŸ')
          }
          
          if (this.$parent.playerPosition) {
            this.playerPosition = this.$parent.playerPosition
            console.log('âœ… ä»çˆ¶ç»„ä»¶è·å–playerPositionæˆåŠŸ')
          }
          
          if (this.$parent.characterPaths) {
            this.characterPaths = this.$parent.characterPaths
            console.log('âœ… ä»çˆ¶ç»„ä»¶è·å–characterPathsæˆåŠŸ')
          }
          
          if (this.$parent.colonistData) {
            this.colonistData = this.$parent.colonistData
            console.log('âœ… ä»çˆ¶ç»„ä»¶è·å–colonistDataæˆåŠŸ')
          }
          
          if (this.$parent.currentCharacter) {
            this.currentCharacter = this.$parent.currentCharacter
            console.log('âœ… ä»çˆ¶ç»„ä»¶è·å–currentCharacteræˆåŠŸ')
          }
          
          if (this.$parent.currentTileInfo) {
            this.currentTileInfo = this.$parent.currentTileInfo
            console.log('âœ… ä»çˆ¶ç»„ä»¶è·å–currentTileInfoæˆåŠŸ')
          }
          
          if (typeof this.$parent.showDebugInfo !== 'undefined') {
            this.showDebugInfo = this.$parent.showDebugInfo
            console.log('âœ… ä»çˆ¶ç»„ä»¶è·å–showDebugInfoæˆåŠŸ')
          }
        } else {
          console.log('âš ï¸ æ— æ³•è®¿é—®çˆ¶ç»„ä»¶ï¼Œä½¿ç”¨é»˜è®¤æ•°æ®')
        }
      } catch (error) {
        console.log('âŒ ä»çˆ¶ç»„ä»¶è·å–æ•°æ®å¤±è´¥:', error.message)
      }
    },
    
    // åˆå§‹åŒ–åœ°å½¢ç½‘æ ¼æ•°æ®
    initializeTerrainGrid() {
      const biomes = ['TemperateForest', 'BorealForest', 'TropicalRainforest', 'AridShrubland', 'Desert']
      const hills = [null, 'SmallHills', 'LargeHills', 'Mountains']
      const objects = [null, null, null, 'Town', 'AncientRoad'] // å¤§éƒ¨åˆ†ä¸ºç©ºï¼Œå°‘æ•°æœ‰ç‰©ä½“
      
      this.terrainGrid = []
      for (let i = 0; i < 5; i++) {
        const row = []
        for (let j = 0; j < 5; j++) {
          const tile = {
            biome: biomes[Math.floor(Math.random() * biomes.length)],
            hill: hills[Math.floor(Math.random() * hills.length)],
            object: objects[Math.floor(Math.random() * objects.length)]
          }
          row.push(tile)
        }
        this.terrainGrid.push(row)
      }
      
      console.log('ğŸ” åœ°å½¢ç½‘æ ¼åˆå§‹åŒ–å®Œæˆ:', {
        ç½‘æ ¼å¤§å°: `${this.terrainGrid.length}x${this.terrainGrid[0].length}`,
        æ ·æœ¬æ•°æ®: this.terrainGrid[0][0]
      })
    },
    
    // è·å–ç”Ÿç‰©ç¾¤ç³»å›¾ç‰‡è·¯å¾„
    getBiomePath(biome) {
      const biomeMap = {
        'TemperateForest': 'common/world/Biomes/TemperateForest.png',
        'BorealForest': 'common/world/Biomes/BorealForest.png',
        'TropicalRainforest': 'common/world/Biomes/TropicalRainforest.png',
        'TropicalSwamp': 'common/world/Biomes/TropicalSwamp.png',
        'AridShrubland': 'common/world/Biomes/AridShrubland.png',
        'Desert': 'common/world/Biomes/Desert.png',
        'ExtremeDesert': 'common/world/Biomes/ExtremeDesert.png',
        'Tundra': 'common/world/Biomes/Tundra.png',
        'IceSheet': 'common/world/Biomes/IceSheet.png',
        'SeaIce': 'common/world/Biomes/IceSheet.png'
      }
      const path = biomeMap[biome] || 'common/world/Biomes/TemperateForest.png'
      console.log('ğŸ” è·å–ç”Ÿç‰©ç¾¤ç³»å›¾ç‰‡è·¯å¾„:', { biome, path })
      return path
    },
    
    // è·å–åœ°å½¢ç‰¹å¾å›¾ç‰‡è·¯å¾„
    getHillPath(hill) {
      const hillMap = {
        'SmallHills': 'common/world/Hills/SmallHills.png',
        'LargeHills': 'common/world/Hills/LargeHills.png',
        'Mountains': 'common/world/Hills/Mountains.png',
        'ImpassableMountains': 'common/world/Hills/Impassable.png'
      }
      const path = hillMap[hill] || null
      if (path) {
        console.log('ğŸ” è·å–åœ°å½¢ç‰¹å¾å›¾ç‰‡è·¯å¾„:', { hill, path })
      }
      return path
    },
    
    // è·å–åœ°å½¢ç‰©ä½“å›¾ç‰‡è·¯å¾„
    getObjectPath(object) {
      const objectMap = {
        'AncientRoad': 'common/world/WorldObjects/DefaultSettlement.png', // ä½¿ç”¨å¯ç”¨çš„å›¾ç‰‡
        'AbandonedSettlement': 'common/world/WorldObjects/DefaultSettlement.png',
        'ShrineOfNature': 'common/world/WorldObjects/DefaultSettlement.png',
        'Town': 'common/world/WorldObjects/Town.png',
        'Ambush': 'common/world/WorldObjects/Ambush.png',
        'Mechanoids': 'common/world/WorldObjects/Mechanoids.png'
      }
      const path = objectMap[object] || null
      if (path) {
        console.log('ğŸ” è·å–åœ°å½¢ç‰©ä½“å›¾ç‰‡è·¯å¾„:', { object, path })
      }
      return path
    },
    
    // è·å–å½“å‰åœ°å—ä¿¡æ¯
    getCurrentTileInfo() {
      if (!this.currentTileInfo) {
        return 'ä½ç½®ä¿¡æ¯ä¸å¯ç”¨'
      }
      
      let info = `ç”Ÿç‰©ç¾¤ç³»: ${this.currentTileInfo.biome || 'æœªçŸ¥'}`
      if (this.currentTileInfo.hill) {
        info += ` | åœ°å½¢: ${this.currentTileInfo.hill}`
      }
      if (this.currentTileInfo.object) {
        info += ` | åœ°æ ‡: ${this.currentTileInfo.object}`
      }
      return info
    },
    
    // å¤„ç†å›¾ç‰‡åŠ è½½é”™è¯¯
    handleImageError(event) {
      try {
        if (!event || !event.target) {
          console.log('âš ï¸ å›¾ç‰‡åŠ è½½é”™è¯¯ï¼šäº‹ä»¶å¯¹è±¡ä¸ºç©º')
          return
        }
        
        const imageSrc = event.target.src || 'æœªçŸ¥è·¯å¾„'
        const imageClass = event.target.className || 'æœªçŸ¥ç±»å‹'
        
        console.log('âŒ åœ°å›¾ç»„ä»¶å›¾ç‰‡åŠ è½½å¤±è´¥:', {
          è·¯å¾„: imageSrc,
          ç±»å‹: imageClass,
          é”™è¯¯æ—¶é—´: new Date().toLocaleTimeString(),
          å®Œæ•´è·¯å¾„: window.location.origin + '/' + imageSrc
        })
        
        // æ£€æŸ¥å›¾ç‰‡ç±»å‹å¹¶æä¾›è¯¦ç»†ä¿¡æ¯
        if (imageClass.includes('terrain-tile-bg')) {
          console.log('ğŸ” åœ°å½¢èƒŒæ™¯å›¾ç‰‡åŠ è½½å¤±è´¥ï¼Œæ£€æŸ¥biomesç›®å½•')
        } else if (imageClass.includes('terrain-tile-hill')) {
          console.log('ğŸ” åœ°å½¢ç‰¹å¾å›¾ç‰‡åŠ è½½å¤±è´¥ï¼Œæ£€æŸ¥hillsç›®å½•')
        } else if (imageClass.includes('terrain-tile-object')) {
          console.log('ğŸ” åœ°å½¢ç‰©ä½“å›¾ç‰‡åŠ è½½å¤±è´¥ï¼Œæ£€æŸ¥objectsç›®å½•')
        }
        
        // å¦‚æœæ˜¯äººç‰©æ¨¡å‹å›¾ç‰‡åŠ è½½å¤±è´¥ï¼Œå°è¯•ä½¿ç”¨é»˜è®¤å›¾ç‰‡
        if (imageSrc.includes('/common/human/')) {
          if (imageClass === 'player-body') {
            event.target.src = 'common/human/bodies/Naked_Male_south.png'
          } else if (imageClass === 'player-head') {
            event.target.src = 'common/human/heads/Male/Male_Average_Normal_south.png'
          }
        }
      } catch (error) {
        console.log('âŒ åœ°å›¾ç»„ä»¶handleImageErrorå‡½æ•°æ‰§è¡Œå¼‚å¸¸:', error.message)
      }
    }
  }
}
</script>

<style>
.map-container {
  flex-direction: column;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
  position: relative;
  background-color: transparent;
}

/* åœ°å›¾çŠ¶æ€æŒ‡ç¤ºå™¨ - å›ºå®šåœ¨å®¹å™¨é¡¶éƒ¨ */
.map-status-indicator {
  position: absolute;
  top: 3px;
  left: 5px;
  right: 5px;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 2px;
  background-color: rgba(0, 0, 0, 0.8);
  border: 1px solid #FFD700;
  border-radius: 3px;
  max-height: 30px;
  overflow: hidden;
}

.map-status-text {
  color: #FFD700;
  font-size: 10px;
  font-weight: bold;
  text-align: center;
  margin-bottom: 1px;
  line-height: 10px;
}

.map-info-text {
  color: #ffffff;
  font-size: 8px;
  text-align: center;
  margin-bottom: 1px;
  line-height: 8px;
}

.player-status-text {
  color: #00ff00;
  font-size: 8px;
  text-align: center;
  line-height: 8px;
}

/* åœ°å½¢ä¿¡æ¯é¢æ¿ - å›ºå®šåœ¨åœ°å½¢ç½‘æ ¼ä¸‹æ–¹ */
.terrain-info-panel {
  position: absolute;
  bottom: 5px;
  left: 5px;
  right: 5px;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 4px;
  background-color: rgba(0, 0, 0, 0.8);
  border: 1px solid #8B4513;
  border-radius: 3px;
  max-height: 40px;
  overflow: hidden;
}

.terrain-info-text {
  color: #ffffff;
  font-size: 10px;
  text-align: center;
  margin-bottom: 1px;
  line-height: 10px;
}

.player-name-text {
  color: #ffdd44;
  font-size: 11px;
  font-weight: bold;
  text-align: center;
  line-height: 11px;
}

/* åœ°å½¢ç½‘æ ¼ - CSS Gridè‡ªé€‚åº”å¸ƒå±€ */
.terrain-grid {
  position: absolute;
  top: 35px;
  left: 0;
  right: 0;
  bottom: 0;
  display: grid;
  grid-template-rows: repeat(10, 1fr);
  gap: 1px;
  background-color: transparent;
  padding: 5px;
  margin: 0 auto;
  max-width: 100%;
  aspect-ratio: 1;
}

.terrain-row {
  display: grid;
  grid-template-columns: repeat(10, 1fr);
  gap: 1px;
  width: 100%;
  height: 100%;
  margin: 0;
}

.terrain-tile-container {
  position: relative;
  width: 100%;
  height: 100%;
  margin: 0;
  border: 1px solid rgba(139, 69, 19, 0.3);
  aspect-ratio: 1;
}

.terrain-tile-bg {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.terrain-tile-hill {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.terrain-tile-object {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.terrain-debug-text {
  position: absolute;
  top: 1px;
  left: 1px;
  color: red;
  font-size: 8px;
  font-weight: bold;
  text-align: left;
  background-color: rgba(255, 255, 255, 0.8);
  padding: 1px 2px;
  border-radius: 1px;
  line-height: 8px;
}

.terrain-biome-text {
  position: absolute;
  bottom: 1px;
  left: 1px;
  color: blue;
  font-size: 6px;
  font-weight: bold;
  text-align: left;
  background-color: rgba(255, 255, 255, 0.8);
  padding: 1px 2px;
  border-radius: 1px;
  line-height: 6px;
}

.terrain-hill-text {
  position: absolute;
  top: 1px;
  right: 1px;
  color: green;
  font-size: 6px;
  font-weight: bold;
  text-align: right;
  background-color: rgba(255, 255, 255, 0.8);
  padding: 1px 2px;
  border-radius: 1px;
  line-height: 6px;
}

.player-character {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.player-body {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.player-head {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.player-hair {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.player-beard {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
}
/* è°ƒè¯•ä¿¡æ¯æ ·å¼ */
.debug-info {
  position: absolute;
  top: 0;
  left: 0;
  color: #FF0000;
  font-size: 10px;
  font-weight: bold;
  background-color: rgba(255, 255, 255, 0.8);
  padding: 2px 4px;
  border-radius: 3px;
  z-index: 1000;
  pointer-events: none;
}

</style>